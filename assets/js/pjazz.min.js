function pjazz(loadFrom,loadTo,linksFrom){function doLinkSource(contentElem){if(""==contentElem||null==contentElem||void 0==contentElem)if(""==loadTo||null==loadTo||void 0==loadTo){loadTo="body";var contentElem=loadTo;contentElem=document.getElementsByTagName(contentElem)}else{var contentElem=loadTo;contentElem=document.getElementById(contentElem)}doLinks(contentElem)}function doLinks(contentElem){if(""==linksFrom||null==linksFrom||void 0==linksFrom){linksFrom="body";var linkList=document.getElementsByTagName(linksFrom)[0]}else var linkList=document.getElementById(linksFrom);for(var pjazzLinks=new Array,externalLinks=new Array,tmpLinks=linkList.getElementsByTagName("a"),i=0;i<tmpLinks.length;i++)link=tmpLinks[i],"external"!=link.rel?pjazzLinks.push(link):"external"==link.rel&&externalLinks.push(link);prepareOutboundLinks(externalLinks),doLoad(pjazzLinks,contentElem)}function prepareOutboundLinks(externalLinks){for(var i=0;i<externalLinks.length;i++)externalLinks[i].onclick=function(event){event.preventDefault();var eLink=this;window.open(eLink.href,eLink.innerHTML,"")}}function doLoad(pjazzLinks,contentElem){for(var i=0;i<pjazzLinks.length;i++)pjazzLinks[i].onclick=function(event){event.preventDefault();var pjlink=this.href,getProt=window.location.protocol,getHost=window.location.host,getPort=window.location.port;pjlink=pjlink.replace(getProt+"/","").replace(getHost+"/","").replace(getPort,""),xhr.open("GET",pjlink,!0),xhr.send(null),xhr.onreadystatechange=function(){var state=xhr.readyState,status=xhr.status;4==state&&200==status?doParse(contentElem):0==state|1==state|2==state|3==state||(301==status?console.log("This content has been permamently moved"):302==status?console.log("The server is sending a 302 http message but probably means a 303 and it has been temporarily moved"):308==status?console.log("This content has been permamently redirected"):400==status?console.log("Bad Request"):401==status?console.log("You are not authorised to see this content"):403==status?console.log("You are forbidden from seeing this content"):404==status?console.log("This content was not found"):500==status?console.log("There was a problem with the server"):console.log("readystate = ",state,"server status = ",state))},tmpNodes.pjlink=pjlink}}function doParse(contentElem){var elemText=xhr.response,elemNodes="";elemText=elemText.replace(/<!doctype html>/i,"").replace("<html>","").replace("</html>",""),elemTextHead=elemText.replace(/<body>[\s\S]*?<\/body>/,""),elemTextBody=elemText.replace(/<head>[\s\S]*?<\/head>/,""),tmpNodes.head.innerHTML=elemTextHead,tmpNodes.body.innerHTML=elemTextBody,elemNodes=tmpNodes.head.children;for(var i=0;i<elemNodes.length;i++){var node=elemNodes[i];"TITLE"==node.tagName&&(newTitle=node.innerText,document.getElementsByTagName("title")[0].innerText=newTitle)}if("body"==targetElem)elemNodes=tmpNodes.body.innerHTML,contentElem[0].innerHTML=elemNodes;else{elemNodes=tmpNodes.body.children;for(var i=0;i<elemNodes.length;i++){var node=elemNodes[i],newTitle="";node.id==targetElem&&(contentElem.innerHTML=node.innerHTML)}}doLinkSource(contentElem)}function prepareOutboundLinks(){for(var links=document.body.getElementsByTagName("a"),externalLinks=new Array,i=0;i<links.length;i++){var link=links[i];"external"==link.rel&&externalLinks.push(link)}for(var j=0;j<externalLinks.length;j++)externalLinks[j].onclick=function(event){event.preventDefault();var eLink=this;window.open(eLink.href,eLink.innerHTML,"")}}if(""==loadFrom||null==loadFrom||void 0==loadFrom){loadFrom="body";var targetElem=loadFrom}else var targetElem=loadFrom;doLinkSource();var xhr=new XMLHttpRequest,tmpNodes=document.implementation.createHTMLDocument();prepareOutboundLinks()}