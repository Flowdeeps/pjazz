function pjazz(loadFrom,loadTo,linksFrom){function doLinkSource(sourceElem,linksFrom){if(""==loadFrom||null==loadFrom||void 0==loadFrom){loadFrom="body"}else;doLinkTarget()}function doLinkTarget(){""!=loadTo&&null!=loadTo&&void 0!=loadTo||(loadTo="body"),doLinks()}function doLinks(){if(""==linksFrom||null==linksFrom||void 0==linksFrom||"body"==linksFrom){linksFrom="body";var linkList=document.getElementsByTagName(linksFrom)[0],tmpLinks=linkList.getElementsByTagName("a")}else var linkList=document.getElementById(linksFrom),tmpLinks=linkList.getElementsByTagName("a");pjazzLinks=new Array,externalLinks=new Array;for(var i=0;i<tmpLinks.length;i++)link=tmpLinks[i],"external"==link.rel?externalLinks.push(link):pjazzLinks.push(link);prepareOutboundLinks(),doLoad()}function doLoad(){for(var i=0;i<pjazzLinks.length;i++)pjazzLinks[i].onclick=function(event){event.preventDefault(),pjlink=this.href;var getProt=window.location.protocol,getHost=window.location.host,getPort=window.location.port;pjlink=pjlink.replace(getProt+"/","").replace(getHost+"/","").replace(getPort,""),xhr.open("GET",pjlink,!0),xhr.send(null),xhr.onreadystatechange=function(){var state=xhr.readyState,status=xhr.status;4==state&&200==status?doParse():0==state|1==state|2==state|3==state||(301==status?console.log("This content has been permamently moved"):302==status?console.log("The server is sending a 302 http message but probably means a 303 and it has been temporarily moved"):308==status?console.log("This content has been permamently redirected"):400==status?console.log("Bad Request"):401==status?console.log("You are not authorised to see this content"):403==status?console.log("You are forbidden from seeing this content"):404==status?console.log("This content was not found"):500==status?console.log("There was a problem with the server"):console.log("readystate = ",state,"server status = ",state))}}}function doParse(){targetElem=loadTo;var elemText=xhr.response,elemNodes="";elemText=elemText.replace(/<!doctype html>/i,"").replace("<html>","").replace("</html>",""),elemTextHead=elemText.replace(/<body>[\s\S]*?<\/body>/,""),elemTextBody=elemText.replace(/<head>[\s\S]*?<\/head>/,""),tmpNodes.head.innerHTML=elemTextHead,tmpNodes.body.innerHTML=elemTextBody,elemNodes=tmpNodes.head.children;for(var i=0;i<elemNodes.length;i++){var node=elemNodes[i];"title"==node.tagName.toLowerCase()&&(newTitle=node.innerText,document.getElementsByTagName("title")[0].innerText=newTitle)}if("body"==targetElem)elemNodes=tmpNodes.body.innerHTML,document.getElementsByTagName(targetElem)[0].innerHTML=elemNodes;else{elemNodes=tmpNodes.body.children;for(var i=0;i<elemNodes.length;i++){var node=elemNodes[i],newTitle="";node.id==targetElem&&(document.getElementById(targetElem).innerHTML=node.innerHTML)}}history.pushState("",newTitle,pjlink),doLinkSource()}function prepareOutboundLinks(){for(var links=document.body.getElementsByTagName("a"),externalLinks=new Array,i=0;i<links.length;i++){var link=links[i];"external"==link.rel&&externalLinks.push(link)}for(var j=0;j<externalLinks.length;j++)externalLinks[j].onclick=function(event){event.preventDefault();var eLink=this;window.open(eLink.href,eLink.innerHTML,"")}}var loadFrom=loadFrom,loadTo=loadTo,linksFrom=linksFrom,pjlink="",xhr=new XMLHttpRequest,tmpNodes=document.implementation.createHTMLDocument("tmp");doLinkSource(),prepareOutboundLinks()}